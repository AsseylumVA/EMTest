## Аутентификация

Аутентификация реализована на основе JWT-токенов.

После успешного входа пользователю выдается JWT-токен, который используется для идентификации пользователя при последующих запросах.

Токен передается в каждом запросе через HTTP-заголовок:

```
Authorization: Bearer <jwt_token>
```

### Возможности пользователя

- Регистрация нового пользователя
- Вход в систему по email и паролю
- Выход из системы
- Получение данных собственного профиля
- Обновление данных профиля
- Деактивация аккаунта (soft delete)

## Авторизация

В проекте реализована ролевая модель управления доступом (Role-Based Access Control).

Права доступа назначаются не напрямую пользователям, а через роли, которые определяют разрешенные действия над бизнес-элементами.

### Структура базы данных

1. **User** — пользователи системы
2. **Role** — роли (например: admin, manager, user)
3. **BusinessElement** — бизнес-элементы приложения (products, orders, stores и др.)
4. **AccessRoleRule** — правила доступа роли к бизнес-элементу
5. **UserRole** — связь пользователей с ролями

### Права доступа

Каждое правило доступа может содержать следующие разрешения:

- `read_permission` — чтение собственных объектов
- `read_all_permission` — чтение всех объектов
- `create_permission` — создание объектов
- `update_permission` — обновление собственных объектов
- `update_all_permission` — обновление всех объектов
- `delete_permission` — удаление собственных объектов
- `delete_all_permission` — удаление всех объектов

### Логика проверки прав

- пользователь определяется по JWT-токену
- загружаются роли пользователя
- для запрашиваемого бизнес-элемента выбираются правила доступа
- разрешения объединяются по принципу OR
- при необходимости дополнительно проверяется владелец объекта

---

## Управление ролями и правилами доступа

Реализовано API для администрирования RBAC-модели.

Доступно только пользователям с ролью **admin**:

- создание и редактирование ролей
- управление бизнес-элементами
- настройка правил доступа
- назначение ролей пользователям

---

## Бизнес-объекты

Для демонстрации работы системы авторизации реализованы mock-viewset’ы бизнес-объектов:

- Products
- Orders
- Stores

---

## Тестовые данные

Проект содержит тестовую базу данных `db.sqlite3` c настройками RBAC-модели.
